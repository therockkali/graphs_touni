define(["./core","./var/document","./var/rnotwhite","./var/slice","./data/var/dataPriv","./core/init","./selector"],function(e,t,n,i,o){function r(){return!0}function a(){return!1}function s(){try{return t.activeElement}catch(e){}}function l(t,n,i,o,r,s){var p,d;if("object"==typeof n){"string"!=typeof i&&(o=o||i,i=void 0);for(d in n)l(t,d,i,o,n[d],s);return t}if(null==o&&null==r?(r=i,o=i=void 0):null==r&&("string"==typeof i?(r=o,o=void 0):(r=o,o=i,i=void 0)),r===!1)r=a;else if(!r)return t;return 1===s&&(p=r,r=function(t){return e().off(t),p.apply(this,arguments)},r.guid=p.guid||(p.guid=e.guid++)),t.each(function(){e.event.add(this,n,r,o,i)})}var p=/^key/,d=/^(?:mouse|pointer|contextmenu|drag|drop)|click/,c=/^([^.]*)(?:\.(.+)|)/;return e.event={global:{},add:function(t,i,r,a,s){var l,p,d,u,h,f,v,g,m,y,b,T=o.get(t);if(T)for(r.handler&&(l=r,r=l.handler,s=l.selector),r.guid||(r.guid=e.guid++),(u=T.events)||(u=T.events={}),(p=T.handle)||(p=T.handle=function(n){return"undefined"!=typeof e&&e.event.triggered!==n.type?e.event.dispatch.apply(t,arguments):void 0}),i=(i||"").match(n)||[""],h=i.length;h--;)d=c.exec(i[h])||[],m=b=d[1],y=(d[2]||"").split(".").sort(),m&&(v=e.event.special[m]||{},m=(s?v.delegateType:v.bindType)||m,v=e.event.special[m]||{},f=e.extend({type:m,origType:b,data:a,handler:r,guid:r.guid,selector:s,needsContext:s&&e.expr.match.needsContext.test(s),namespace:y.join(".")},l),(g=u[m])||(g=u[m]=[],g.delegateCount=0,v.setup&&v.setup.call(t,a,y,p)!==!1||t.addEventListener&&t.addEventListener(m,p)),v.add&&(v.add.call(t,f),f.handler.guid||(f.handler.guid=r.guid)),s?g.splice(g.delegateCount++,0,f):g.push(f),e.event.global[m]=!0)},remove:function(t,i,r,a,s){var l,p,d,u,h,f,v,g,m,y,b,T=o.hasData(t)&&o.get(t);if(T&&(u=T.events)){for(i=(i||"").match(n)||[""],h=i.length;h--;)if(d=c.exec(i[h])||[],m=b=d[1],y=(d[2]||"").split(".").sort(),m){for(v=e.event.special[m]||{},m=(a?v.delegateType:v.bindType)||m,g=u[m]||[],d=d[2]&&new RegExp("(^|\\.)"+y.join("\\.(?:.*\\.|)")+"(\\.|$)"),p=l=g.length;l--;)f=g[l],!s&&b!==f.origType||r&&r.guid!==f.guid||d&&!d.test(f.namespace)||a&&a!==f.selector&&("**"!==a||!f.selector)||(g.splice(l,1),f.selector&&g.delegateCount--,v.remove&&v.remove.call(t,f));p&&!g.length&&(v.teardown&&v.teardown.call(t,y,T.handle)!==!1||e.removeEvent(t,m,T.handle),delete u[m])}else for(m in u)e.event.remove(t,m+i[h],r,a,!0);e.isEmptyObject(u)&&o.remove(t,"handle events")}},dispatch:function(t){t=e.event.fix(t);var n,r,a,s,l,p=[],d=i.call(arguments),c=(o.get(this,"events")||{})[t.type]||[],u=e.event.special[t.type]||{};if(d[0]=t,t.delegateTarget=this,!u.preDispatch||u.preDispatch.call(this,t)!==!1){for(p=e.event.handlers.call(this,t,c),n=0;(s=p[n++])&&!t.isPropagationStopped();)for(t.currentTarget=s.elem,r=0;(l=s.handlers[r++])&&!t.isImmediatePropagationStopped();)t.rnamespace&&!t.rnamespace.test(l.namespace)||(t.handleObj=l,t.data=l.data,a=((e.event.special[l.origType]||{}).handle||l.handler).apply(s.elem,d),void 0!==a&&(t.result=a)===!1&&(t.preventDefault(),t.stopPropagation()));return u.postDispatch&&u.postDispatch.call(this,t),t.result}},handlers:function(t,n){var i,o,r,a,s=[],l=n.delegateCount,p=t.target;if(l&&p.nodeType&&("click"!==t.type||isNaN(t.button)||t.button<1))for(;p!==this;p=p.parentNode||this)if(1===p.nodeType&&(p.disabled!==!0||"click"!==t.type)){for(o=[],i=0;l>i;i++)a=n[i],r=a.selector+" ",void 0===o[r]&&(o[r]=a.needsContext?e(r,this).index(p)>-1:e.find(r,this,null,[p]).length),o[r]&&o.push(a);o.length&&s.push({elem:p,handlers:o})}return l<n.length&&s.push({elem:this,handlers:n.slice(l)}),s},props:"altKey bubbles cancelable ctrlKey currentTarget detail eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(e,t){return null==e.which&&(e.which=null!=t.charCode?t.charCode:t.keyCode),e}},mouseHooks:{props:"button buttons clientX clientY offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(e,n){var i,o,r,a=n.button;return null==e.pageX&&null!=n.clientX&&(i=e.target.ownerDocument||t,o=i.documentElement,r=i.body,e.pageX=n.clientX+(o&&o.scrollLeft||r&&r.scrollLeft||0)-(o&&o.clientLeft||r&&r.clientLeft||0),e.pageY=n.clientY+(o&&o.scrollTop||r&&r.scrollTop||0)-(o&&o.clientTop||r&&r.clientTop||0)),e.which||void 0===a||(e.which=1&a?1:2&a?3:4&a?2:0),e}},fix:function(n){if(n[e.expando])return n;var i,o,r,a=n.type,s=n,l=this.fixHooks[a];for(l||(this.fixHooks[a]=l=d.test(a)?this.mouseHooks:p.test(a)?this.keyHooks:{}),r=l.props?this.props.concat(l.props):this.props,n=new e.Event(s),i=r.length;i--;)o=r[i],n[o]=s[o];return n.target||(n.target=t),3===n.target.nodeType&&(n.target=n.target.parentNode),l.filter?l.filter(n,s):n},special:{load:{noBubble:!0},focus:{trigger:function(){return this!==s()&&this.focus?(this.focus(),!1):void 0},delegateType:"focusin"},blur:{trigger:function(){return this===s()&&this.blur?(this.blur(),!1):void 0},delegateType:"focusout"},click:{trigger:function(){return"checkbox"===this.type&&this.click&&e.nodeName(this,"input")?(this.click(),!1):void 0},_default:function(t){return e.nodeName(t.target,"a")}},beforeunload:{postDispatch:function(e){void 0!==e.result&&e.originalEvent&&(e.originalEvent.returnValue=e.result)}}}},e.removeEvent=function(e,t,n){e.removeEventListener&&e.removeEventListener(t,n)},e.Event=function(t,n){return this instanceof e.Event?(t&&t.type?(this.originalEvent=t,this.type=t.type,this.isDefaultPrevented=t.defaultPrevented||void 0===t.defaultPrevented&&t.returnValue===!1?r:a):this.type=t,n&&e.extend(this,n),this.timeStamp=t&&t.timeStamp||e.now(),void(this[e.expando]=!0)):new e.Event(t,n)},e.Event.prototype={constructor:e.Event,isDefaultPrevented:a,isPropagationStopped:a,isImmediatePropagationStopped:a,isSimulated:!1,preventDefault:function(){var e=this.originalEvent;this.isDefaultPrevented=r,e&&!this.isSimulated&&e.preventDefault()},stopPropagation:function(){var e=this.originalEvent;this.isPropagationStopped=r,e&&!this.isSimulated&&e.stopPropagation()},stopImmediatePropagation:function(){var e=this.originalEvent;this.isImmediatePropagationStopped=r,e&&!this.isSimulated&&e.stopImmediatePropagation(),this.stopPropagation()}},e.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(t,n){e.event.special[t]={delegateType:n,bindType:n,handle:function(t){var i,o=this,r=t.relatedTarget,a=t.handleObj;return r&&(r===o||e.contains(o,r))||(t.type=a.origType,i=a.handler.apply(this,arguments),t.type=n),i}}}),e.fn.extend({on:function(e,t,n,i){return l(this,e,t,n,i)},one:function(e,t,n,i){return l(this,e,t,n,i,1)},off:function(t,n,i){var o,r;if(t&&t.preventDefault&&t.handleObj)return o=t.handleObj,e(t.delegateTarget).off(o.namespace?o.origType+"."+o.namespace:o.origType,o.selector,o.handler),this;if("object"==typeof t){for(r in t)this.off(r,n,t[r]);return this}return n!==!1&&"function"!=typeof n||(i=n,n=void 0),i===!1&&(i=a),this.each(function(){e.event.remove(this,t,i,n)})}}),e});